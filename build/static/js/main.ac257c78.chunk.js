(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{40:function(e,t,n){e.exports=n(63)},61:function(e,t,n){},62:function(e,t,n){},63:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(26),i=n.n(o),l=n(21),c=n(5),s=n(6),u=n(8),m=n(7),d=n(12),p=n(9),h=n(28),b=n.n(h),v=n(3),f="GET_NOTES",g="GET_USER",E="USER_STATUS",y="NOTES_STATUS",N=n(23);N.initializeApp({apiKey:"AIzaSyAOXiMXRUwNg7FQkn3WFhiKcKwZr5wblRI",authDomain:"diary-25027.firebaseapp.com",databaseURL:"https://diary-25027.firebaseio.com",projectId:"diary-25027",storageBucket:"diary-25027.appspot.com",messagingSenderId:"661395996534",appId:"1:661395996534:web:66212869b0e96c45"});var j=N.database().ref("/notes"),O=N.auth(),w=new N.auth.GoogleAuthProvider,k=new N.auth.TwitterAuthProvider;function C(){return function(e){e({type:y,payload:!0}),j.on("value",function(t){e({type:f,payload:t.val()}),e({type:y,payload:!1})},function(){e({type:y,payload:-1})})}}var S=function(e){var t=e.children;return r.a.createElement("div",{className:"jumbotron"},r.a.createElement("div",null,t))};function L(){return function(e){e({type:E,payload:!0}),O.onAuthStateChanged(function(t){e({type:g,payload:t}),e({type:E,payload:!1})})}}var x=n(10),U=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={title:"",body:""},n.handleChange=n.handleChange.bind(Object(d.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(d.a)(n)),n.renderNotes=n.renderNotes.bind(Object(d.a)(n)),n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"handleChange",value:function(e){this.setState(Object(l.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(e){e.preventDefault();var t={title:this.state.title,body:this.state.body,uid:this.props.user.uid};this.props.saveNote(t),this.setState({title:"",body:""})}},{key:"renderNotes",value:function(){var e=this;return b.a.map(this.props.notes,function(t,n){return r.a.createElement(S,{key:n},r.a.createElement(x.b,{to:"/".concat(n)},r.a.createElement("h2",null,t.title)),r.a.createElement("p",null,t.body),t.uid===e.props.user.uid&&r.a.createElement("div",null,r.a.createElement("button",{className:"btn btn-danger btn-l",onClick:function(){return e.props.deleteNote(n)}},"Delete"),r.a.createElement("button",{className:"btn btn-info btn-l pull-right"},r.a.createElement(x.b,{to:"/".concat(n,"/edit")},"Update"))))})}},{key:"render",value:function(){return r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-2 text-center"},r.a.createElement("img",{src:this.props.user.photoURL,height:"100px",className:"img img-responsive cirlce",style:{padding:"20px"}}),r.a.createElement("h4",{className:"username"},"Welcome back ",this.props.user.displayName)),r.a.createElement("div",{className:"col-sm-10"},r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{onChange:this.handleChange,value:this.state.title,type:"text",name:"title",className:"form-control no-border",placeholder:"Title...",required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("textarea",{onChange:this.handleChange,value:this.state.body,type:"text",name:"body",className:"form-control no-border",placeholder:"Body...",required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{className:"btn btn-primary col-sm-12"},"Save"))),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),this.renderNotes())))}}]),t}(a.Component);var B=Object(v.b)(function(e,t){return{notes:e.notes,user:e.user}},{getNotes:C,saveNote:function(e){return function(t){return j.push(e)}},deleteNote:function(e){return function(t){return j.child(e).remove()}},getUser:L})(U),T=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function W(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}var A=n(18),R=n(38),D=n(39),I=n(33),P=Object(A.combineReducers)({notes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:return t.payload;default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g:return t.payload;default:return e}},loading:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case y:return Object(I.a)({},e,{notes:t.payload});case E:return Object(I.a)({},e,{user:t.payload});default:return e}}}),q=n(19),G=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){null!==this.props.user&&this.props.history.push("/")}},{key:"componentWillReceiveProps",value:function(e){null!==e.user&&e.history.push("/")}},{key:"render",value:function(){return r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-12 jumbotron",style:{marginTop:"-20px"}},r.a.createElement("h1",null,"DIARY | ",(new Date).getFullYear()),r.a.createElement("h2",null,r.a.createElement("i",null,"Login with your favourite ",r.a.createElement("u",null,"Social Network")," ","to start writing!")))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-12 text-center"},r.a.createElement("button",{className:"btn btn-danger col-sm-6 col-sm-offset-3 login",onClick:this.props.googleLogin},"Login with Google"))),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-12 text-center"},r.a.createElement("button",{className:"btn btn-info col-sm-6 col-sm-offset-3 login",onClick:this.props.twitterLogin},"Login with Twitter"))))}}]),t}(a.Component);var M=Object(v.b)(function(e,t){return{user:e.user}},{googleLogin:function(){return function(e){return O.signInWithPopup(w)}},twitterLogin:function(){return function(e){return O.signInWithPopup(k)}}})(G),_=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("nav",{className:"navbar navbar-default"},r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"navbar-header"},r.a.createElement("button",{type:"button",className:"navbar-toggle","data-toggle":"collapse","data-target":"#myNavbar"},r.a.createElement("span",{className:"icon-bar"}),r.a.createElement("span",{className:"icon-bar"}),r.a.createElement("span",{className:"icon-bar"})),r.a.createElement(x.b,{className:"navbar-brand",to:"/"},"DIARY")),r.a.createElement("div",{className:"collapse navbar-collapse",id:"myNavbar"},r.a.createElement("ul",{className:"nav navbar-nav navbar-right"},null===this.props.user?r.a.createElement("li",null,r.a.createElement(x.b,{to:"/login"},"Login")):r.a.createElement("li",null,r.a.createElement(x.b,{to:"/logout",onClick:function(){return e.props.logout()}},"Logout"))))))}}]),t}(a.Component);var F=Object(v.b)(function(e,t){return{user:e.user}},{getUser:L,logout:function(){return function(e){return O.signOut()}}})(_),K=(n(61),function(){return r.a.createElement("div",{className:"flex-center position-ref full-height"},r.a.createElement("div",{className:"title m-b-md"},"Loading..."))}),Y=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){var e=this.props,t=e.userLoading,n=e.notesLoading;void 0===t&&this.props.getUser(),void 0===n&&this.props.getNotes()}},{key:"componentWillReceiveProps",value:function(e){-1===e.notesLoading&&null!==e.user&&this.props.getNotes()}},{key:"render",value:function(){var e=this.props,t=e.userLoading,n=e.notesLoading,a=e.children;return!t&&!n||null===this.props.user?r.a.createElement("div",null,a):r.a.createElement(K,null)}}]),t}(a.Component);var z=Object(q.g)(Object(v.b)(function(e){return{userLoading:e.loading.user,notesLoading:e.loading.notes,user:e.user}},{getUser:L,getNotes:C})(Y)),J=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidUpdate",value:function(){var e=this.props,t=e.userLoading,n=e.user;!1!==t||n||this.props.history.push("/login")}},{key:"render",value:function(){var e=this.props,t=e.user,n=e.userLoading,a=e.children;return!1===n&&t?r.a.createElement("div",null,a):null}}]),t}(a.Component);var X=Object(q.g)(Object(v.b)(function(e){return{userLoading:e.loading.user,user:e.user}})(J)),Q=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={commentBody:""},n.handleChange=n.handleChange.bind(Object(d.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(d.a)(n)),n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"handleChange",value:function(e){this.setState({commentBody:e.target.value})}},{key:"handleSubmit",value:function(e){e.preventDefault();var t={commentBody:this.state.commentBody,uid:this.props.uid};this.props.saveComment(this.props.id,t),this.setState({commentBody:""})}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("textarea",{onChange:this.handleChange,value:this.state.commentBody,type:"text",name:"commentBody",className:"form-control no-border",placeholder:"Write comment..",required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{className:"btn btn-success"},"Add comment"))))}}]),t}(a.Component);var Z=Object(v.b)(function(e,t){return{uid:e.user.uid}},{saveComment:function(e,t){return function(n){j.child(e).child("comments").push(t)}}})(Q),$=function(e){var t=e.children;return r.a.createElement("div",null," \u2192 ",t)},H=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"renderComments",value:function(){var e=this.props.note;return b.a.map(e.comments,function(e,t){return r.a.createElement($,{key:t,id:t},e.commentBody)})}},{key:"render",value:function(){var e=this.props.note;return r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-6 col-sm-offset-3"},r.a.createElement("h1",null,e.title),r.a.createElement("p",null,e.body),r.a.createElement(Z,{id:this.props.match.params.id}),this.renderComments(),r.a.createElement("br",null),r.a.createElement(x.b,{to:"/"}," \xab Back"))))}}]),t}(a.Component);var V=Object(v.b)(function(e,t){return{note:e.notes[t.match.params.id],uid:e.user.uid}})(H),ee=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={title:n.props.note.title,body:n.props.note.body},n.handleChange=n.handleChange.bind(Object(d.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(d.a)(n)),n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"handleChange",value:function(e){this.setState(Object(l.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(e){e.preventDefault();var t={title:this.state.title,body:this.state.body,uid:this.props.uid};this.props.editNote(this.props.match.params.id,t),this.setState({title:"",body:""}),this.props.history.push("/")}},{key:"render",value:function(){return r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-6 col-sm-offset-3"},r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{onChange:this.handleChange,value:this.state.title,type:"text",name:"title",className:"form-control no-border",placeholder:"Title...",required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("textarea",{onChange:this.handleChange,value:this.state.body,type:"text",name:"body",className:"form-control no-border",placeholder:"Body...",required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{className:"btn btn-primary col-sm-12"},"Update"))))))}}]),t}(a.Component);var te=Object(v.b)(function(e,t){return{note:e.notes[t.match.params.id],uid:e.user.uid}},{editNote:function(e,t){return function(n){return j.child(e).update(t)}}})(ee),ne=(n(62),Object(A.createStore)(P,Object(D.composeWithDevTools)(Object(A.applyMiddleware)(R.a))));i.a.render(r.a.createElement(v.a,{store:ne},r.a.createElement(x.a,null,r.a.createElement(z,null,r.a.createElement("div",null,r.a.createElement(q.d,null,r.a.createElement(q.b,{path:"/login",component:M,exact:!0}),r.a.createElement(q.a,{from:"/logout",to:"/login"}),r.a.createElement(X,null,r.a.createElement(F,null),r.a.createElement(q.b,{path:"/:id/edit",component:te,exact:!0}),r.a.createElement(q.b,{path:"/:id",component:V,exact:!0}),r.a.createElement(q.b,{path:"/",component:B,exact:!0}))))))),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("","/service-worker.js");T?function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):W(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e):W(e)})}}()}},[[40,1,2]]]);
//# sourceMappingURL=main.ac257c78.chunk.js.map